{
	"containerDefinitions": [
		{
			"essential": true,
			"name": "analysis",
			"image": "{{ ssm `/kotohiro-dev-analysis-rep/uri` }}:{{ must_env `IMAGE_TAG` }}",
			"environment": [],
			"secrets": [
				{
					"name": "DATABASE_URL",
					"valueFrom": "{{ ssm `/kotohiro-dev-app-secret/arn` }}:DATABASE_URL::"
				},
				{
					"name": "ANALYSIS_USER",
					"valueFrom": "{{ ssm `/kotohiro-dev-app-secret/arn` }}:ANALYSIS_USER::"
				},
				{
					"name": "ANALYSIS_USER_PASSWORD",
					"valueFrom": "{{ ssm `/kotohiro-dev-app-secret/arn` }}:ANALYSIS_USER_PASSWORD::"
				},
				{
					"name": "MODEL_ID",
					"valueFrom": "{{ ssm `/kotohiro-dev-app-secret/arn` }}:MODEL_ID::"
				}
			],
			"logConfiguration": {
				"logDriver": "awslogs",
				"options": {
					"awslogs-group": "{{ ssm `/kotohiro-dev-analysis-log-group/name` }}",
					"awslogs-region": "ap-northeast-1",
					"awslogs-stream-prefix": "development"
				}
			},
			"portMappings": [
				{
					"appProtocol": "http",
					"containerPort": 8000,
					"hostPort": 8000,
					"protocol": "tcp"
				}
			],
			"mountPoints": [
				{
					"readOnly": false,
					"containerPath": "/var/lib/amazon",
					"sourceVolume": "var-lib-amazon"
				},
				{
					"readOnly": false,
					"containerPath": "/var/log/amazon",
					"sourceVolume": "var-log-amazon"
				}
			]
		}
	],
	"cpu": "256",
	"memory": "512",
	"family": "kotohiro-dev-analysis",
	"taskRoleArn": "{{ ssm `/kotohiro-dev-analysis-task-role/arn` }}",
	"executionRoleArn": "{{ ssm `/kotohiro-dev-analysis-task-execution-role/arn` }}",
	"networkMode": "awsvpc",
	"requiresCompatibilities": ["FARGATE"],
	"runtimePlatform": {
		"cpuArchitecture": "ARM64"
	},
	"tags": [
		{
			"key": "Name",
			"value": "kotohiro-dev-task-definition"
		}
	],
	"volumes": [
		{
			"name": "var-lib-amazon"
		},
		{
			"name": "var-log-amazon"
		}
	]
}
